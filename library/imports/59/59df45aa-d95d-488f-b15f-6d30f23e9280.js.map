{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\eventSystem.js"],"names":["cc","Class","extends","Component","properties","scoreDisplay","default","type","Label","background","Node","gameOverPanle","Layout","gameOverPanle_failed","gameOverScore","floorPrefab","Prefab","fakefloor","rope","lastfloor","particlePrefab","particlePrefab2","particlePrefab3","layoutStart","time","music","AudioClip","effect","effect1","perfect","flag","onLoad","isPerfect","flag_number","flag_start","isOver","count","score","fallside","angleSpeed","angleTimer","shakeAnglespeed","active","node","on","event","spawnNewFloor","bind","start","newfloor","instantiate","addChild","getComponent","bindnode","changeSprite","id","setPosition","convertToWorldSpaceAR","v2","Math","sin","angle","PI","hideFakeFloor","self","console","debug","scheduleOnce","newPar","current","audioEngine","play","newPar2","startdown","changeWaveSpeed","changeScore","newPar3","current1","changeState","changeTexture","changeSpeed","VeryPerfect","string","gameOver","falldown","i","LayoutOn","LayoutOff","buttonOne","buttonTwo","choice","iniTime","schedule","countdown","log","restar","director","loadScene","update","dt","cos"],"mappings":"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","file":"eventSystem.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        scoreDisplay: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        background: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n        gameOverPanle: {\r\n            default: null,\r\n            type: cc.Layout\r\n        },\r\n        gameOverPanle_failed: {\r\n            default: null,\r\n            type: cc.Layout\r\n        },\r\n        gameOverScore: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        floorPrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        fakefloor: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        rope: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        lastfloor: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n        particlePrefab: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        particlePrefab2: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        particlePrefab3: {\r\n            default: null,\r\n            type: cc.Prefab\r\n        },\r\n\r\n        layoutStart: {\r\n            default: null,\r\n            type: cc.Layout\r\n        },\r\n\r\n        time: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        music: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        effect: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n        effect1: {\r\n            default: null,\r\n            type: cc.AudioClip\r\n        },\r\n\r\n        perfect: {\r\n            default: null,\r\n            type: cc.Node\r\n        },\r\n\r\n\r\n        flag: true,\r\n\r\n    },\r\n\r\n    onLoad: function() {\r\n        // this.choice = true;\r\n        this.isPerfect = false;\r\n        this.flag_number = 0;\r\n        this.flag_start = false;\r\n        this.isOver = false;\r\n        this.count = 60;\r\n        this.score = 0;\r\n        this.fallside = 0;\r\n        this.angleSpeed = 0;\r\n        this.angleTimer = 0;\r\n        this.shakeAnglespeed = 0;\r\n        this.perfect.active = false;\r\n        this.node.on('touchend', function(event) {\r\n            if (this.flag && !this.isOver && this.flag_start) {\r\n                this.spawnNewFloor();\r\n            }\r\n        }.bind(this));\r\n        this.node.on('mousedown', function(event) {\r\n            if (this.flag && !this.isOver && this.flag_start) {\r\n                this.spawnNewFloor();\r\n            }\r\n        }.bind(this));\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n    start() {\r\n\r\n    },\r\n\r\n    spawnNewFloor: function() {\r\n        // 使用给定的模板在场景中生成一个新节点\r\n        var newfloor = cc.instantiate(this.floorPrefab);\r\n        this.node.addChild(newfloor);\r\n        newfloor.getComponent('floorScript').bindnode(this.lastfloor, this.node);\r\n        newfloor.getComponent('floorScript').changeSprite(this.fakefloor.getComponent('fakefloorScript').id);\r\n        this.lastfloor = newfloor;\r\n        newfloor.setPosition(this.fakefloor.convertToWorldSpaceAR(cc.v2(-630 + 3300 * Math.sin(this.node.angle * Math.PI / 180), 1840)));\r\n        this.hideFakeFloor();\r\n\r\n    },\r\n\r\n    hideFakeFloor: function() {\r\n        this.flag = false;\r\n        var self = this;\r\n        console.debug(\"0\");\r\n        this.scheduleOnce(function() {\r\n            var newPar = cc.instantiate(self.particlePrefab);\r\n            this.current = cc.audioEngine.play(this.effect, false, 0.3); //\r\n            self.node.addChild(newPar);\r\n            newPar.setPosition(cc.v2(0, 2590, 0));\r\n            var newPar2 = cc.instantiate(self.particlePrefab2);\r\n            self.node.addChild(newPar2);\r\n            newPar2.setPosition(cc.v2(0, 2590, 0));\r\n            console.debug('particles');\r\n        }, 0.4)\r\n\r\n        this.background.getComponent('BackChange').scheduleOnce(function() {\r\n            this.startdown();\r\n            self.changeWaveSpeed();\r\n            if (self.isPerfect) {\r\n                self.changeScore();\r\n                console.debug(\"perfect\");\r\n                var newPar3 = cc.instantiate(self.particlePrefab3);\r\n                self.node.addChild(newPar3);\r\n                newPar3.setPosition(cc.v2(0, 3300, 0));\r\n                console.debug('flower');\r\n\r\n\r\n                //this.getComponent('GreatWork').scheduleOnce(function() {\r\n                //console.debug(\"create particle\");\r\n                //this.create();\r\n                //}, 0.4)\r\n            }\r\n            self.isPerfect = false;\r\n\r\n        }, 0.7);\r\n        //console.debug(\"1\");\r\n\r\n        this.scheduleOnce(function() {\r\n            if (self.isPerfect) {\r\n                this.current1 = cc.audioEngine.play(this.effect1, false, 0.5); //第二个音效\r\n                this.perfect.active = false;\r\n            }\r\n        }, 0.7)\r\n\r\n\r\n        this.lastfloor.getComponent('floorScript').scheduleOnce(function() {\r\n            this.changeState();\r\n        }, 0.7);\r\n        this.fakefloor.getComponent('fakefloorScript').changeTexture(1);\r\n        this.fakefloor.getComponent('fakefloorScript').scheduleOnce(function() {\r\n            // 这里的 this 指向 component\r\n            this.changeTexture(2);\r\n            if (!self.isOver) {\r\n                self.flag = true;\r\n                self.changeScore();\r\n            }\r\n        }, 0.7);\r\n    },\r\n\r\n    changeWaveSpeed: function() {\r\n        if (this.score <= 50) {\r\n            this.rope.getComponent('pendulumScript').changeSpeed(this.score / 20 + 1.5);\r\n            this.fakefloor.getComponent('pendulumScript').changeSpeed(this.score / 20 + 1.5);\r\n        }\r\n    },\r\n\r\n\r\n    VeryPerfect: function() {\r\n\r\n        this.perfect.active = true;\r\n        this.isPerfect = true;\r\n    },\r\n\r\n\r\n    changeScore: function() {\r\n        this.score++;\r\n        this.scoreDisplay.string = 'Score: ' + this.score;\r\n    },\r\n\r\n    gameOver: function() {\r\n        if (!this.isOver) {\r\n            this.isOver = true;\r\n        }\r\n        if (this.flag_number == 0) {\r\n            this.scheduleOnce(function() {\r\n                this.gameOverPanle.node.active = true;\r\n                this.gameOverScore.string = this.score;\r\n                this.gameOverScore.node.active = true;\r\n                console.debug(\"panel_end\");\r\n            }, 1.5)\r\n        }\r\n        if (this.flag_number == 1) {\r\n            this.scheduleOnce(function() {\r\n                this.gameOverPanle_failed.node.active = true;\r\n                this.gameOverScore.string = this.score;\r\n                this.gameOverScore.node.active = true;\r\n                console.debug(\"panel_fail\");\r\n            }, 1.5)\r\n        }\r\n    },\r\n\r\n    falldown: function(i) {\r\n        if (!this.isOver) {\r\n            this.fallside = i;\r\n            // this.choice = false;\r\n            this.gameOver();\r\n        }\r\n    },\r\n\r\n    LayoutOn: function() {\r\n        this.layoutStart.node.active = true;\r\n\r\n    },\r\n\r\n    LayoutOff: function() {\r\n        this.layoutStart.node.active = false;\r\n        this.flag_start = true;\r\n        // console.debug(\"close\");\r\n    },\r\n\r\n    buttonOne: function() {\r\n        this.LayoutOff();\r\n        this.time.string = '';\r\n        // console.debug('button one')\r\n    },\r\n\r\n    buttonTwo: function() {\r\n        this.flag_number = 1;\r\n        this.choice = false;\r\n        this.LayoutOff();\r\n        this.iniTime();\r\n    },\r\n\r\n    iniTime: function() {\r\n        // if (this.count >= 0) {\r\n        this.schedule(function() {\r\n            this.countdown();\r\n        }, 1);\r\n        // }\r\n    },\r\n\r\n    countdown: function() {\r\n        if (this.count >= 1) {\r\n            this.count = this.count - 1;\r\n            this.time.string = this.count + 's';\r\n            cc.log(\"countdown:\" + this.count);\r\n        } else {\r\n            this.flag_number = 0;\r\n            this.gameOver();\r\n        }\r\n    },\r\n\r\n    restar: function() {\r\n        this.gameOverScore.node.active = false;\r\n        cc.director.loadScene('1');\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.fallside == 1) {\r\n            if (this.node.angle < 90) {\r\n                this.angleSpeed += 50 * dt;\r\n                this.node.angle += this.angleSpeed * dt;\r\n            }\r\n        } else if (this.fallside == -1) {\r\n            if (this.node.angle > -90) {\r\n                this.angleSpeed += 50 * dt;\r\n                this.node.angle -= this.angleSpeed * dt;\r\n            }\r\n        } else if (this.score >= 5 && this.score <= 35) {\r\n            this.angleTimer += dt;\r\n            this.shakeAnglespeed = Math.cos(this.angleTimer);\r\n            this.node.angle += this.shakeAnglespeed * (this.score / 5) * dt;\r\n        } else if (this.score >= 35) {\r\n            this.angleTimer += dt;\r\n            this.shakeAnglespeed = Math.cos(this.angleTimer);\r\n            this.node.angle += this.shakeAnglespeed * 5 * dt;\r\n        }\r\n    },\r\n});"]}