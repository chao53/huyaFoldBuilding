window.__require=function e(t,i,s){function n(a,r){if(!i[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var h="function"==typeof __require&&__require;if(!r&&h)return h(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+a+"'")}}var l=i[a]={exports:{}};t[a][0].call(l.exports,function(e){return n(t[a][1][e]||e)},l,l.exports,e,t,i,s)}return i[a].exports}for(var o="function"==typeof __require&&__require,a=0;a<s.length;a++)n(s[a]);return n}({BackChange:[function(e,t,i){"use strict";cc._RF.push(t,"123dfvoCpRBCZtKVLrDqQN4","BackChange"),cc.Class({extends:cc.Component,properties:{SpriteFrame1:{default:null,type:cc.SpriteFrame},CycleFrame:{default:null,type:cc.SpriteFrame},back:{default:null,type:cc.Prefab},width:0,height:0,offset:0,movespeed:0,rate:0,downtime:0,time:0,begincycle:!1},start:function(){this.time=this.downtime;var e=cc.instantiate(this.back),t=this.SpriteFrame1.getOriginalSize();this.rate=t.height/t.width,console.debug(this.rate),this.zindex=-1e3,this.node.addChild(e);e.getComponent(cc.Sprite);e.width=this.width,e.height=this.width*this.rate,e.setPosition(e.width/2,e.height/2);var i=cc.instantiate(this.back);this.node.addChild(i),t=this.CycleFrame.getOriginalSize(),this.rate=t.height/t.width,i.setPosition(e.width/2,e.height+this.width*this.rate/2),i.width=this.width,i.height=this.width*this.rate,i.getComponent(cc.Sprite).spriteFrame=this.CycleFrame},movedown:function(){if(this.node.y-=this.movespeed,this.offset+=this.movespeed,0==this.begincycle)this.offset+this.height+600>=this.node.children[0].height+this.node.children[1].height&&this.changeframe();else{var e=void 0;this.node.children[0].y<this.node.children[1].y?(this.node.children[0],e=this.node.children[1]):(this.node.children[1],e=this.node.children[0]),this.offset+600>=e.height&&this.changeframe()}},startdown:function(){this.time=0},update:function(e){this.time<this.downtime&&(this.movedown(),this.time+=e)},changeframe:function(){var e=void 0,t=void 0;this.node.children[0].y<this.node.children[1].y?(e=this.node.children[0],t=this.node.children[1],console.debug("1")):(e=this.node.children[1],t=this.node.children[0],console.debug("2")),console.debug("change");var i=this.CycleFrame.getOriginalSize();this.rate=i.height/i.width,console.debug(e.y),console.debug(t.y),e.y+=t.height+e.height,e.y-=this.offset,t.y-=this.offset,console.debug(e.y),console.debug(t.y);var s=e.getComponent(cc.Sprite);s.width=this.width,s.height=this.width*this.rate,this.node.setPosition(-630,-1170),this.offset=0,console.debug(this.offset),s.spriteFrame=this.CycleFrame,this.begincycle=!0}}),cc._RF.pop()},{}],eventSystem:[function(e,t,i){"use strict";cc._RF.push(t,"59df4Wq2V1Ij7FfbTDyPpKA","eventSystem"),cc.Class({extends:cc.Component,properties:{scoreDisplay:{default:null,type:cc.Label},background:{default:null,type:cc.Node},gameOverPanle:{default:null,type:cc.Layout},gameOverPanle_failed:{default:null,type:cc.Layout},gameOverScore:{default:null,type:cc.Label},floorPrefab:{default:null,type:cc.Prefab},fakefloor:{default:null,type:cc.Node},rope:{default:null,type:cc.Node},lastfloor:{default:null,type:cc.Node},particlePrefab:{default:null,type:cc.Prefab},particlePrefab2:{default:null,type:cc.Prefab},particlePrefab3:{default:null,type:cc.Prefab},layoutStart:{default:null,type:cc.Layout},time:{default:null,type:cc.Label},flag:!0},onLoad:function(){this.isPerfect=!1,this.flag_number=0,this.flag_start=!1,this.isOver=!1,this.count=5,this.score=0,this.fallside=0,this.angleSpeed=0,this.angleTimer=0,this.shakeAnglespeed=0,this.node.on("touchend",function(e){this.flag&&!this.isOver&&this.flag_start&&this.spawnNewFloor()}.bind(this)),this.node.on("mousedown",function(e){this.flag&&!this.isOver&&this.flag_start&&this.spawnNewFloor()}.bind(this))},start:function(){},spawnNewFloor:function(){var e=cc.instantiate(this.floorPrefab);this.node.addChild(e),e.getComponent("floorScript").bindnode(this.lastfloor,this.node),e.getComponent("floorScript").changeSprite(this.fakefloor.getComponent("fakefloorScript").id),this.lastfloor=e,e.setPosition(this.fakefloor.convertToWorldSpaceAR(cc.v2(3300*Math.sin(this.node.angle*Math.PI/180)-630,1840))),this.hideFakeFloor()},hideFakeFloor:function(){this.flag=!1;var e=this;this.scheduleOnce(function(){var t=cc.instantiate(e.particlePrefab);e.node.addChild(t),t.setPosition(cc.v2(0,2590,0));var i=cc.instantiate(e.particlePrefab2);e.node.addChild(i),i.setPosition(cc.v2(0,2590,0)),console.debug("particles")},.4),this.background.getComponent("BackChange").scheduleOnce(function(){if(this.startdown(),e.changeWaveSpeed(),e.isPerfect){console.debug("perfect");var t=cc.instantiate(e.particlePrefab3);e.node.addChild(t),t.setPosition(cc.v2(0,3300,0)),console.debug("flower")}e.isPerfect=!1},.7),this.lastfloor.getComponent("floorScript").scheduleOnce(function(){this.changeState()},.7),this.fakefloor.getComponent("fakefloorScript").changeTexture(1),this.fakefloor.getComponent("fakefloorScript").scheduleOnce(function(){this.changeTexture(2),e.isOver||(e.flag=!0,e.changeScore())},.7)},changeWaveSpeed:function(){this.score<=50&&(this.rope.getComponent("pendulumScript").changeSpeed(this.score/20+1.5),this.fakefloor.getComponent("pendulumScript").changeSpeed(this.score/20+1.5))},VeryPerfect:function(){this.isPerfect=!0},changeScore:function(){this.score++,this.scoreDisplay.string="Score: "+this.score},gameOver:function(){this.isOver||(this.isOver=!0),0==this.flag_number&&this.scheduleOnce(function(){this.gameOverPanle.node.active=!0,this.gameOverScore.string=this.score,console.debug("panel_end")},1.5),1==this.flag_number&&this.scheduleOnce(function(){this.gameOverPanle_failed.node.active=!0,this.gameOverScore.string=this.score,console.debug("panel_fail")},1.5)},falldown:function(e){this.isOver||(this.fallside=e,this.gameOver())},LayoutOn:function(){this.layoutStart.node.active=!0},LayoutOff:function(){this.layoutStart.node.active=!1,this.flag_start=!0},buttonOne:function(){this.LayoutOff(),this.time.string=""},buttonTwo:function(){this.flag_number=1,this.choice=!1,this.LayoutOff(),this.iniTime()},iniTime:function(){this.schedule(function(){this.countdown()},1)},countdown:function(){this.count>=1?(this.count=this.count-1,this.time.string=this.count+"s",cc.log("countdown:"+this.count)):(this.flag_number=0,this.gameOver())},restar:function(){cc.director.loadScene("1")},update:function(e){1==this.fallside?this.node.angle<90&&(this.angleSpeed+=50*e,this.node.angle+=this.angleSpeed*e):-1==this.fallside?this.node.angle>-90&&(this.angleSpeed+=50*e,this.node.angle-=this.angleSpeed*e):this.score>=5&&this.score<=35?(this.angleTimer+=e,this.shakeAnglespeed=Math.cos(this.angleTimer),this.node.angle+=this.shakeAnglespeed*(this.score/5)*e):this.score>=35&&(this.angleTimer+=e,this.shakeAnglespeed=Math.cos(this.angleTimer),this.node.angle+=5*this.shakeAnglespeed*e)}}),cc._RF.pop()},{}],fakefloorScript:[function(e,t,i){"use strict";cc._RF.push(t,"110fas8IV9IhopKq9bZv7Yq","fakefloorScript"),cc.Class({extends:cc.Component,properties:{spriteFrame1:{default:null,type:cc.SpriteFrame},spriteFrame2:{default:null,type:cc.SpriteFrame},spriteFrame3:{default:null,type:cc.SpriteFrame},spriteFrame4:{default:null,type:cc.SpriteFrame},spriteFrame5:{default:null,type:cc.SpriteFrame},spriteFrame6:{default:null,type:cc.SpriteFrame},spriteFrame7:{default:null,type:cc.SpriteFrame},spriteFrame8:{default:null,type:cc.SpriteFrame},spriteFrame9:{default:null,type:cc.SpriteFrame},spriteFrame10:{default:null,type:cc.SpriteFrame},id:2},changeTexture:function(e){console.debug(e);var t;switch(e){case 1:t=this.spriteFrame1,this.node.getComponent(cc.Sprite).spriteFrame=t;break;case 2:switch(this.id=Math.floor(9*Math.random())+2,console.debug(this.id),this.id){case 2:t=this.spriteFrame2;break;case 3:t=this.spriteFrame3;break;case 4:t=this.spriteFrame4;break;case 5:t=this.spriteFrame5;break;case 6:t=this.spriteFrame6;break;case 7:t=this.spriteFrame7;break;case 8:t=this.spriteFrame8;break;case 9:t=this.spriteFrame9;break;case 10:t=this.spriteFrame10}this.node.getComponent(cc.Sprite).spriteFrame=t}},getId:function(){return this.id},start:function(){},update:function(e){}}),cc._RF.pop()},{}],floorScript:[function(e,t,i){"use strict";cc._RF.push(t,"94032hOeHhD/KJDGlLPBcCb","floorScript"),cc.Class({extends:cc.Component,properties:{lastfloor:{default:null,type:cc.Node},spriteFrame2:{default:null,type:cc.SpriteFrame},spriteFrame3:{default:null,type:cc.SpriteFrame},spriteFrame4:{default:null,type:cc.SpriteFrame},spriteFrame5:{default:null,type:cc.SpriteFrame},spriteFrame6:{default:null,type:cc.SpriteFrame},spriteFrame7:{default:null,type:cc.SpriteFrame},spriteFrame8:{default:null,type:cc.SpriteFrame},spriteFrame9:{default:null,type:cc.SpriteFrame},spriteFrame10:{default:null,type:cc.SpriteFrame},world:{default:null,type:cc.Node},state:0,target:cc.Node},onLoad:function(){this.accelerate=5e3,this.speed=0,this.angleSpeed=0,this.barycenter1=this.node.x,this.barycenter2=this.node.x},bindnode:function(e,t){this.lastfloor=e,this.world=t},changeState:function(){this.state<4?(this.state+=1,this.lastfloor.getComponent("floorScript").changeState()):4==this.state&&(this.node.active=!1)},changeState2:function(e){this.state=e},getbarycenter:function(){return this.barycenter1},getLastpos1:function(){return this.lastfloor.x},getLastpos2:function(){return this.lastfloor.getComponent("floorScript").getLastpos1()},changeSprite:function(e){var t;switch(e){case 2:t=this.spriteFrame2;break;case 3:t=this.spriteFrame3;break;case 4:t=this.spriteFrame4;break;case 5:t=this.spriteFrame5;break;case 6:t=this.spriteFrame6;break;case 7:t=this.spriteFrame7;break;case 8:t=this.spriteFrame8;break;case 9:t=this.spriteFrame9;break;case 10:t=this.spriteFrame10}this.node.getComponent(cc.Sprite).spriteFrame=t},start:function(){},update:function(e){0==this.state?this.node.y>2740?(this.speed+=this.accelerate*e,this.node.y-=this.speed*e):Math.abs(this.lastfloor.x-this.node.x)>=500?this.state=6:this.lastfloor.x-this.node.x>250?(this.state=7,this.node.anchorX=(this.lastfloor.x-this.node.x)/500,this.node.anchorY=0,this.node.x+=500*this.node.anchorX-250,this.node.y-=150):this.lastfloor.x-this.node.x<-250?(this.state=8,this.node.anchorX=1+(this.lastfloor.x-this.node.x)/500,this.node.anchorY=0,this.node.x+=500*this.node.anchorX-250,this.node.y-=150):(this.barycenter1=(this.node.x+this.lastfloor.x)/2,this.barycenter2=(this.node.x+2*this.lastfloor.getComponent("floorScript").getbarycenter())/3,this.getLastpos2()-this.barycenter1>250||this.lastfloor.getComponent("floorScript").getLastpos2()-this.barycenter2>250?this.world.getComponent("eventSystem").falldown(1):this.getLastpos2()-this.barycenter1<-250||this.lastfloor.getComponent("floorScript").getLastpos2()-this.barycenter2<-250?this.world.getComponent("eventSystem").falldown(-1):this.node.y=2740,Math.abs(this.lastfloor.x-this.node.x)<=30&&this.world.getComponent("eventSystem").VeryPerfect()):1==this.state?this.node.y>2440?this.node.y-=428.57*e:this.node.y=2440:2==this.state?this.node.y>2140?this.node.y-=428.57*e:this.node.y=2140:3==this.state?this.node.y>1840?this.node.y-=428.57*e:this.node.y=1840:4==this.state?this.node.y>1540?this.node.y-=428.57*e:this.node.y=1540:5==this.state||(6==this.state?(this.world.getComponent("eventSystem").gameOver(),this.node.y>1540?(this.speed+=this.accelerate*e,this.node.y-=this.speed*e):this.node.y=1540):7==this.state?this.node.angle<90?(this.angleSpeed+=1e3*e,this.node.angle+=this.angleSpeed*e):this.state=6:8==this.state&&(this.node.angle>-90?(this.angleSpeed+=1e3*e,this.node.angle-=this.angleSpeed*e):this.state=6))}}),cc._RF.pop()},{}],noLimited:[function(e,t,i){"use strict";cc._RF.push(t,"f226dP97aNGj5NWkK+5592y","noLimited"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],pendulumScript:[function(e,t,i){"use strict";cc._RF.push(t,"48f73+RfzlDAofK8Q3RZ22G","pendulumScript"),cc.Class({extends:cc.Component,properties:{flag:1,waveAngle:30,waveSpeed:1},onLoad:function(){this.angleTimer=0,this.Anglespeed=0},changeSpeed:function(e){this.waveSpeed=e},update:function(e){this.angleTimer+=this.waveSpeed*e,this.Anglespeed=Math.cos(this.angleTimer),this.node.angle+=this.Anglespeed*this.waveAngle*this.flag*this.waveSpeed*e}}),cc._RF.pop()},{}],test1:[function(e,t,i){"use strict";cc._RF.push(t,"4a0b1pMSU1IN6jaTCgGK1Eb","test1"),cc.Class({extends:cc.Component,properties:{texture:{default:null,type:cc.Texture2D},spriteFrame:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.spriteFrame,this.texture},start:function(){},update:function(e){console.debug(this.node.convertToWorldSpaceAR(cc.v2(-540,-1200)))}}),cc._RF.pop()},{}]},{},["BackChange","eventSystem","fakefloorScript","floorScript","noLimited","pendulumScript","test1"]);