
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/floorScript.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '94032hOeHhD/KJDGlLPBcCb', 'floorScript');
// scripts/floorScript.js

"use strict";

// Learn cc.Class:
//  - https://docs.cocos.com/creator/manual/en/scripting/class.html
// Learn Attribute:
//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html
// Learn life-cycle callbacks:
//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html
cc.Class({
  "extends": cc.Component,
  properties: {
    lastfloor: {
      "default": null,
      type: cc.Node
    },
    spriteFrame2: {
      "default": null,
      type: cc.SpriteFrame
    },
    spriteFrame3: {
      "default": null,
      type: cc.SpriteFrame
    },
    spriteFrame4: {
      "default": null,
      type: cc.SpriteFrame
    },
    spriteFrame5: {
      "default": null,
      type: cc.SpriteFrame
    },
    spriteFrame6: {
      "default": null,
      type: cc.SpriteFrame
    },
    spriteFrame7: {
      "default": null,
      type: cc.SpriteFrame
    },
    spriteFrame8: {
      "default": null,
      type: cc.SpriteFrame
    },
    spriteFrame9: {
      "default": null,
      type: cc.SpriteFrame
    },
    spriteFrame10: {
      "default": null,
      type: cc.SpriteFrame
    },
    world: {
      "default": null,
      type: cc.Node
    },
    state: 0,
    //1-4正常 5销毁 6直线下坠 7向左滚
    target: cc.Node
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.accelerate = 5000;
    this.speed = 0;
    this.angleSpeed = 0;
    this.barycenter1 = this.node.x;
    this.barycenter2 = this.node.x;
  },
  bindnode: function bindnode(node1, node2) {
    this.lastfloor = node1;
    this.world = node2;
  },
  changeState: function changeState() {
    if (this.state < 4) {
      this.state += 1;
      this.lastfloor.getComponent('floorScript').changeState();
    } else if (this.state == 4) {
      this.node.active = false;
    }
  },
  changeState2: function changeState2(i) {
    this.state = i;
  },
  getbarycenter: function getbarycenter() {
    //返回重心
    return this.barycenter1;
  },
  getLastpos1: function getLastpos1() {
    //返回下层坐标
    return this.lastfloor.x;
  },
  getLastpos2: function getLastpos2() {
    //返回下下层坐标
    return this.lastfloor.getComponent("floorScript").getLastpos1();
  },
  changeSprite: function changeSprite(id) {
    var self = this;
    var spriteFrame;

    switch (id) {
      case 2:
        spriteFrame = this.spriteFrame2;
        break;

      case 3:
        spriteFrame = this.spriteFrame3;
        break;

      case 4:
        spriteFrame = this.spriteFrame4;
        break;

      case 5:
        spriteFrame = this.spriteFrame5;
        break;

      case 6:
        spriteFrame = this.spriteFrame6;
        break;

      case 7:
        spriteFrame = this.spriteFrame7;
        break;

      case 8:
        spriteFrame = this.spriteFrame8;
        break;

      case 9:
        spriteFrame = this.spriteFrame9;
        break;

      case 10:
        spriteFrame = this.spriteFrame10;
        break;

      default:
        break;
    }

    self.node.getComponent(cc.Sprite).spriteFrame = spriteFrame;
  },
  start: function start() {},
  update: function update(dt) {
    if (this.state == 0) {
      if (this.node.y > 2740) {
        this.speed += this.accelerate * dt;
        this.node.y -= this.speed * dt;
      } else {
        if (Math.abs(this.lastfloor.x - this.node.x) >= 500) {
          //判断是否落空
          this.state = 6;
        } else if (this.lastfloor.x - this.node.x > 250) {
          //向左滚
          this.state = 7;
          this.node.anchorX = (this.lastfloor.x - this.node.x) / 500;
          this.node.anchorY = 0; //重新设置锚点，基于锚点旋转

          this.node.x += 500 * this.node.anchorX - 250;
          this.node.y -= 150;
        } else if (this.lastfloor.x - this.node.x < -250) {
          //向右滚
          this.state = 8;
          this.node.anchorX = 1 + (this.lastfloor.x - this.node.x) / 500;
          this.node.anchorY = 0; //重新设置锚点，基于锚点旋转

          this.node.x += 500 * this.node.anchorX - 250;
          this.node.y -= 150;
        } else {
          this.barycenter1 = (this.node.x + this.lastfloor.x) / 2;
          this.barycenter2 = (this.node.x + 2 * this.lastfloor.getComponent("floorScript").getbarycenter()) / 3;

          if (this.getLastpos2() - this.barycenter1 > 250 || this.lastfloor.getComponent("floorScript").getLastpos2() - this.barycenter2 > 250) {
            this.world.getComponent('eventSystem').falldown(1);
          } else if (this.getLastpos2() - this.barycenter1 < -250 || this.lastfloor.getComponent("floorScript").getLastpos2() - this.barycenter2 < -250) {
            this.world.getComponent('eventSystem').falldown(-1);
          } else {
            this.node.y = 2740;
          }

          if (Math.abs(this.lastfloor.x - this.node.x) <= 30) {
            this.world.getComponent('eventSystem').VeryPerfect();
          }
        }
      }
    } else if (this.state == 1) {
      if (this.node.y > 2440) {
        this.node.y -= 428.57 * dt;
      } else {
        this.node.y = 2440;
      }
    } else if (this.state == 2) {
      if (this.node.y > 2140) {
        this.node.y -= 428.57 * dt;
      } else {
        this.node.y = 2140;
      }
    } else if (this.state == 3) {
      if (this.node.y > 1840) {
        this.node.y -= 428.57 * dt;
      } else {
        this.node.y = 1840;
      }
    } else if (this.state == 4) {
      if (this.node.y > 1540) {
        this.node.y -= 428.57 * dt;
      } else {
        this.node.y = 1540;
      }
    } else if (this.state == 5) {} else if (this.state == 6) {
      this.world.getComponent('eventSystem').gameOver();

      if (this.node.y > 1540) {
        this.speed += this.accelerate * dt;
        this.node.y -= this.speed * dt;
      } else {
        this.node.y = 1540;
      }
    } else if (this.state == 7) {
      if (this.node.angle < 90) {
        this.angleSpeed += 1000 * dt;
        this.node.angle += this.angleSpeed * dt;
      } else {
        this.state = 6;
      }
    } else if (this.state == 8) {
      if (this.node.angle > -90) {
        this.angleSpeed += 1000 * dt;
        this.node.angle -= this.angleSpeed * dt;
      } else {
        this.state = 6;
      }
    }
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcZmxvb3JTY3JpcHQuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJsYXN0Zmxvb3IiLCJ0eXBlIiwiTm9kZSIsInNwcml0ZUZyYW1lMiIsIlNwcml0ZUZyYW1lIiwic3ByaXRlRnJhbWUzIiwic3ByaXRlRnJhbWU0Iiwic3ByaXRlRnJhbWU1Iiwic3ByaXRlRnJhbWU2Iiwic3ByaXRlRnJhbWU3Iiwic3ByaXRlRnJhbWU4Iiwic3ByaXRlRnJhbWU5Iiwic3ByaXRlRnJhbWUxMCIsIndvcmxkIiwic3RhdGUiLCJ0YXJnZXQiLCJvbkxvYWQiLCJhY2NlbGVyYXRlIiwic3BlZWQiLCJhbmdsZVNwZWVkIiwiYmFyeWNlbnRlcjEiLCJub2RlIiwieCIsImJhcnljZW50ZXIyIiwiYmluZG5vZGUiLCJub2RlMSIsIm5vZGUyIiwiY2hhbmdlU3RhdGUiLCJnZXRDb21wb25lbnQiLCJhY3RpdmUiLCJjaGFuZ2VTdGF0ZTIiLCJpIiwiZ2V0YmFyeWNlbnRlciIsImdldExhc3Rwb3MxIiwiZ2V0TGFzdHBvczIiLCJjaGFuZ2VTcHJpdGUiLCJpZCIsInNlbGYiLCJzcHJpdGVGcmFtZSIsIlNwcml0ZSIsInN0YXJ0IiwidXBkYXRlIiwiZHQiLCJ5IiwiTWF0aCIsImFicyIsImFuY2hvclgiLCJhbmNob3JZIiwiZmFsbGRvd24iLCJWZXJ5UGVyZmVjdCIsImdhbWVPdmVyIiwiYW5nbGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUFBLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxTQUFTLEVBQUU7QUFDUCxpQkFBUyxJQURGO0FBRVBDLE1BQUFBLElBQUksRUFBRUwsRUFBRSxDQUFDTTtBQUZGLEtBREg7QUFLUkMsSUFBQUEs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QVU4QixLQUFWLElBQW1CLEtBQUtoQyxVQUFMLEdBQWtCdUIsRUFBckM7QUFDSCxPQUhELE1BR087QUFDSCxhQUFLNUIsS0FBTCxHQUFhLENBQWI7QUFDSDtBQUNKO0FBQ0o7QUExTkksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTGVhcm4gY2MuQ2xhc3M6XHJcbi8vICAtIGh0dHBzOi8vZG9jcy5jb2Nvcy5jb20vY3JlYXRvci9tYW51YWwvZW4vc2NyaXB0aW5nL2NsYXNzLmh0bWxcclxuLy8gTGVhcm4gQXR0cmlidXRlOlxyXG4vLyAgLSBodHRwczovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL2VuL3NjcmlwdGluZy9yZWZlcmVuY2UvYXR0cmlidXRlcy5odG1sXHJcbi8vIExlYXJuIGxpZmUtY3ljbGUgY2FsbGJhY2tzOlxyXG4vLyAgLSBodHRwczovL2RvY3MuY29jb3MuY29tL2NyZWF0b3IvbWFudWFsL2VuL3NjcmlwdGluZy9saWZlLWN5Y2xlLWNhbGxiYWNrcy5odG1sXHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGxhc3RmbG9vcjoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5Ob2RlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVGcmFtZTI6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVGcmFtZTM6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVGcmFtZTQ6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVGcmFtZTU6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVGcmFtZTY6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVGcmFtZTc6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVGcmFtZTg6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVGcmFtZTk6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzcHJpdGVGcmFtZTEwOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgd29ybGQ6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3RhdGU6IDAsIC8vMS005q2j5bi4IDXplIDmr4EgNuebtOe6v+S4i+WdoCA35ZCR5bem5ruaXHJcbiAgICAgICAgdGFyZ2V0OiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBMSUZFLUNZQ0xFIENBTExCQUNLUzpcclxuXHJcbiAgICBvbkxvYWQoKSB7XHJcbiAgICAgICAgdGhpcy5hY2NlbGVyYXRlID0gNTAwMDtcclxuICAgICAgICB0aGlzLnNwZWVkID0gMDtcclxuICAgICAgICB0aGlzLmFuZ2xlU3BlZWQgPSAwO1xyXG4gICAgICAgIHRoaXMuYmFyeWNlbnRlcjEgPSB0aGlzLm5vZGUueDtcclxuICAgICAgICB0aGlzLmJhcnljZW50ZXIyID0gdGhpcy5ub2RlLng7XHJcbiAgICB9LFxyXG5cclxuICAgIGJpbmRub2RlOiBmdW5jdGlvbihub2RlMSwgbm9kZTIpIHtcclxuICAgICAgICB0aGlzLmxhc3RmbG9vciA9IG5vZGUxO1xyXG4gICAgICAgIHRoaXMud29ybGQgPSBub2RlMjtcclxuICAgIH0sXHJcblxyXG4gICAgY2hhbmdlU3RhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlIDwgNCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlICs9IDE7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdGZsb29yLmdldENvbXBvbmVudCgnZmxvb3JTY3JpcHQnKS5jaGFuZ2VTdGF0ZSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PSA0KSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIGNoYW5nZVN0YXRlMjogZnVuY3Rpb24oaSkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBpO1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgZ2V0YmFyeWNlbnRlcjogZnVuY3Rpb24oKSB7IC8v6L+U5Zue6YeN5b+DXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFyeWNlbnRlcjE7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldExhc3Rwb3MxOiBmdW5jdGlvbigpIHsgLy/ov5Tlm57kuIvlsYLlnZDmoIdcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXN0Zmxvb3IueDtcclxuICAgIH0sXHJcblxyXG4gICAgZ2V0TGFzdHBvczI6IGZ1bmN0aW9uKCkgeyAvL+i/lOWbnuS4i+S4i+WxguWdkOagh1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxhc3RmbG9vci5nZXRDb21wb25lbnQoXCJmbG9vclNjcmlwdFwiKS5nZXRMYXN0cG9zMSgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBjaGFuZ2VTcHJpdGU6IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBzcHJpdGVGcmFtZTtcclxuICAgICAgICBzd2l0Y2ggKGlkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHNwcml0ZUZyYW1lID0gdGhpcy5zcHJpdGVGcmFtZTI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgc3ByaXRlRnJhbWUgPSB0aGlzLnNwcml0ZUZyYW1lMztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICBzcHJpdGVGcmFtZSA9IHRoaXMuc3ByaXRlRnJhbWU0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgIHNwcml0ZUZyYW1lID0gdGhpcy5zcHJpdGVGcmFtZTU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICAgICAgc3ByaXRlRnJhbWUgPSB0aGlzLnNwcml0ZUZyYW1lNjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICBzcHJpdGVGcmFtZSA9IHRoaXMuc3ByaXRlRnJhbWU3O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgICAgIHNwcml0ZUZyYW1lID0gdGhpcy5zcHJpdGVGcmFtZTg7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICAgICAgc3ByaXRlRnJhbWUgPSB0aGlzLnNwcml0ZUZyYW1lOTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICAgICAgc3ByaXRlRnJhbWUgPSB0aGlzLnNwcml0ZUZyYW1lMTA7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLm5vZGUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBzcHJpdGVGcmFtZTtcclxuICAgIH0sXHJcblxyXG4gICAgc3RhcnQoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGUoZHQpIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSAwKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGUueSA+IDI3NDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BlZWQgKz0gdGhpcy5hY2NlbGVyYXRlICogZHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUueSAtPSB0aGlzLnNwZWVkICogZHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5sYXN0Zmxvb3IueCAtIHRoaXMubm9kZS54KSA+PSA1MDApIHsgLy/liKTmlq3mmK/lkKbokL3nqbpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gNjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5sYXN0Zmxvb3IueCAtIHRoaXMubm9kZS54ID4gMjUwKSB7IC8v5ZCR5bem5ruaXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlLmFuY2hvclggPSAodGhpcy5sYXN0Zmxvb3IueCAtIHRoaXMubm9kZS54KSAvIDUwMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGUuYW5jaG9yWSA9IDA7IC8v6YeN5paw6K6+572u6ZSa54K577yM5Z+65LqO6ZSa54K55peL6L2sXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlLnggKz0gNTAwICogdGhpcy5ub2RlLmFuY2hvclggLSAyNTA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlLnkgLT0gMTUwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmxhc3RmbG9vci54IC0gdGhpcy5ub2RlLnggPCAtMjUwKSB7IC8v5ZCR5Y+z5ruaXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDg7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlLmFuY2hvclggPSAxICsgKHRoaXMubGFzdGZsb29yLnggLSB0aGlzLm5vZGUueCkgLyA1MDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlLmFuY2hvclkgPSAwOyAvL+mHjeaWsOiuvue9rumUmueCue+8jOWfuuS6jumUmueCueaXi+i9rFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZS54ICs9IDUwMCAqIHRoaXMubm9kZS5hbmNob3JYIC0gMjUwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm9kZS55IC09IDE1MDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYXJ5Y2VudGVyMSA9ICh0aGlzLm5vZGUueCArIHRoaXMubGFzdGZsb29yLngpIC8gMjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJhcnljZW50ZXIyID0gKHRoaXMubm9kZS54ICsgMiAqIHRoaXMubGFzdGZsb29yLmdldENvbXBvbmVudChcImZsb29yU2NyaXB0XCIpLmdldGJhcnljZW50ZXIoKSkgLyAzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldExhc3Rwb3MyKCkgLSB0aGlzLmJhcnljZW50ZXIxID4gMjUwIHx8IHRoaXMubGFzdGZsb29yLmdldENvbXBvbmVudChcImZsb29yU2NyaXB0XCIpLmdldExhc3Rwb3MyKCkgLSB0aGlzLmJhcnljZW50ZXIyID4gMjUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29ybGQuZ2V0Q29tcG9uZW50KCdldmVudFN5c3RlbScpLmZhbGxkb3duKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZXRMYXN0cG9zMigpIC0gdGhpcy5iYXJ5Y2VudGVyMSA8IC0yNTAgfHwgdGhpcy5sYXN0Zmxvb3IuZ2V0Q29tcG9uZW50KFwiZmxvb3JTY3JpcHRcIikuZ2V0TGFzdHBvczIoKSAtIHRoaXMuYmFyeWNlbnRlcjIgPCAtMjUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29ybGQuZ2V0Q29tcG9uZW50KCdldmVudFN5c3RlbScpLmZhbGxkb3duKC0xKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGUueSA9IDI3NDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKE1hdGguYWJzKHRoaXMubGFzdGZsb29yLnggLSB0aGlzLm5vZGUueCkgPD0gMzApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmxkLmdldENvbXBvbmVudCgnZXZlbnRTeXN0ZW0nKS5WZXJ5UGVyZmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PSAxKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGUueSA+IDI0NDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS55IC09IDQyOC41NyAqIGR0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLnkgPSAyNDQwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09IDIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9kZS55ID4gMjE0MCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLnkgLT0gNDI4LjU3ICogZHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUueSA9IDIxNDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT0gMykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub2RlLnkgPiAxODQwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGUueSAtPSA0MjguNTcgKiBkdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS55ID0gMTg0MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PSA0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGUueSA+IDE1NDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS55IC09IDQyOC41NyAqIGR0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlLnkgPSAxNTQwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09IDUpIHtcclxuXHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09IDYpIHtcclxuICAgICAgICAgICAgdGhpcy53b3JsZC5nZXRDb21wb25lbnQoJ2V2ZW50U3lzdGVtJykuZ2FtZU92ZXIoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9kZS55ID4gMTU0MCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGVlZCArPSB0aGlzLmFjY2VsZXJhdGUgKiBkdDtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS55IC09IHRoaXMuc3BlZWQgKiBkdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS55ID0gMTU0MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PSA3KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vZGUuYW5nbGUgPCA5MCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmdsZVNwZWVkICs9IDEwMDAgKiBkdDtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5hbmdsZSArPSB0aGlzLmFuZ2xlU3BlZWQgKiBkdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSA2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09IDgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9kZS5hbmdsZSA+IC05MCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmdsZVNwZWVkICs9IDEwMDAgKiBkdDtcclxuICAgICAgICAgICAgICAgIHRoaXMubm9kZS5hbmdsZSAtPSB0aGlzLmFuZ2xlU3BlZWQgKiBkdDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSA2O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxufSk7Il19